# 合并二叉树 - 视觉设计指南

本文档详细规定了合并二叉树可视化动画的视觉设计标准，包括色彩系统、排版规范、图形元素、节点设计等，确保整个项目视觉风格的一致性与专业性。

## 一、设计原则与视觉风格

### 1.1 核心设计原则

- **清晰性**: 视觉设计首要目标是清晰展示算法流程与数据结构
- **层次性**: 通过视觉差异建立内容的层次关系和重要性
- **一致性**: 保持整个界面元素的视觉语言一致
- **引导性**: 视觉元素应引导用户注意力集中到当前算法步骤
- **教育性**: 设计应服务于学习目标，强化算法理解

### 1.2 整体视觉风格

采用现代简约的设计风格，具有以下特点：

- **扁平化设计**: 避免过多的拟物化和装饰元素
- **适度留白**: 确保视觉空间呼吸感，减少视觉噪音
- **强调对比**: 使用对比突出重要元素和当前焦点
- **动效克制**: 动画效果服务于内容理解，避免过度装饰
- **专业严谨**: 保持学术专业性，同时兼顾美观

## 二、色彩系统

### 2.1 主色调

使用Google Material Design调色板为基础，定义以下主色：

| 颜色名称 | 颜色代码 | 应用场景 |
|---------|---------|---------|
| 主蓝色 | #4285F4 | 第一棵树节点、主要交互元素 |
| 主橙色 | #F4B400 | 第二棵树节点 |
| 主绿色 | #0F9D58 | 合并结果树节点 |
| 中性灰 | #757575 | 文本、图标、边框等 |

### 2.2 扩展色板

| 颜色类别 | 色值 | 应用场景 |
|---------|------|---------|
| 蓝色-浅 | #E3F2FD | 代码高亮背景、选中状态 |
| 蓝色-深 | #1A73E8 | 鼠标悬停状态、强调文本 |
| 橙色-浅 | #FFF8E1 | 第二棵树相关元素背景 |
| 橙色-深 | #E37400 | 第二棵树强调状态 |
| 绿色-浅 | #E8F5E9 | 合并树相关元素背景 |
| 绿色-深 | #0B8043 | 合并树强调状态 |
| 灰色-超浅 | #F5F5F5 | 背景、分隔符 |
| 灰色-浅 | #E0E0E0 | 边框、分割线 |
| 灰色-中 | #9E9E9E | 次要文本、禁用状态 |
| 灰色-深 | #424242 | 正文文本 |
| 灰色-超深 | #212121 | 标题文本 |

### 2.3 功能色与状态色

| 功能 | 色值 | 应用场景 |
|-----|------|---------|
| 成功 | #0F9D58 | 操作成功提示 |
| 错误 | #DB4437 | 错误状态、警告 |
| 高亮 | #FFEB3B | 当前操作节点高亮 |
| 禁用 | #BDBDBD | 禁用状态的控件 |

### 2.4 透明度规范

| 透明度 | 数值 | 应用场景 |
|-------|-----|---------|
| 完全不透明 | 1.0 | 已处理的节点、主要文本 |
| 高不透明度 | 0.87 | 次要文本、正在处理的元素 |
| 中等不透明度 | 0.6 | 辅助信息、非焦点元素 |
| 低不透明度 | 0.38 | 禁用状态、背景元素 |
| 微透明 | 0.12 | 分割线、边框 |

### 2.5 渐变设计

保持克制使用渐变，仅用于以下场景：

1. **进度条**: 从左到右的主色渐变增强进度感
2. **连接线动画**: 可使用轻微渐变强调数据流动方向
3. **背景分区**: 可使用淡色渐变区分功能区域

## 三、排版系统

### 3.1 字体选择

- **主要字体**: Roboto或系统无衬线字体
- **代码字体**: Fira Code, Consolas或其他等宽字体
- **备选系统字体**: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", sans-serif

### 3.2 字体大小体系

| 元素类型 | 字体大小 | 行高 | 字重 | 颜色 |
|---------|--------|------|-----|------|
| 主标题 | 24px | 32px | 500 | #212121 |
| 次级标题 | 20px | 28px | 500 | #212121 |
| 模块标题 | 16px | 24px | 500 | #424242 |
| 正文文本 | 14px | 20px | 400 | #424242 |
| 辅助文本 | 12px | 16px | 400 | #757575 |
| 小标签 | 11px | 16px | 500 | #757575 |
| 代码文本 | 14px | 20px | 400 | #212121 |
| 节点数值 | 16px | - | 500 | 视节点类型而定 |

### 3.3 文本对齐

- **标题**: 左对齐，不使用居中对齐
- **正文**: 左对齐
- **表格内容**: 根据内容类型决定(数字右对齐，文本左对齐)
- **按钮文本**: 居中对齐
- **节点值**: 水平垂直居中

### 3.4 文本截断

当空间有限时，使用以下策略处理文本:

- **省略号截断**: 单行文本使用"..."表示截断
- **多行展示**: 步骤说明等可使用多行(最多3行)
- **工具提示**: 为截断文本提供完整内容的悬浮提示

## 四、图形元素设计

### 4.1 树节点设计

#### 4.1.1 节点基本样式

| 树类型 | 节点形状 | 默认大小 | 边框 | 背景色 | 文本颜色 |
|-------|---------|---------|------|-------|---------|
| 树1(蓝) | 圆形 | 40px直径 | 2px #4285F4 | #E3F2FD | #1A73E8 |
| 树2(橙) | 圆形 | 40px直径 | 2px #F4B400 | #FFF8E1 | #E37400 |
| 合并树(绿) | 圆形 | 40px直径 | 2px #0F9D58 | #E8F5E9 | #0B8043 |
| 空节点 | 圆形虚线 | 36px直径 | 2px dashed #BDBDBD | 透明 | #757575 |

#### 4.1.2 节点状态变化

| 状态 | 大小变化 | 阴影 | 其他视觉变化 |
|-----|---------|------|-------------|
| 默认 | 40px | 无 | - |
| 高亮(当前处理) | 48px (120%) | 0 2px 8px rgba(0,0,0,0.15) | 边框加粗至3px |
| 活跃(处理中) | 44px (110%) | 0 1px 4px rgba(0,0,0,0.1) | 轻微发光效果 |
| 已处理 | 40px | 无 | 不透明度 1.0 |
| 待处理 | 40px | 无 | 不透明度 0.6 |
| 添加中 | 40px | 无 | 从小到大的缩放动画 |

#### 4.1.3 节点文本样式

- **字体**: Roboto或系统无衬线字体
- **字体大小**: 16px
- **字重**: 500 (medium)
- **排列**: 水平垂直居中对齐
- **单/双位数**: 保持相同的节点大小

### 4.2 连接线设计

#### 4.2.1 边的基本样式

| 连接线类型 | 线条样式 | 粗细 | 颜色 |
|-----------|---------|------|------|
| 树1边 | 实线 | 2px | #4285F4 (40%透明度) |
| 树2边 | 实线 | 2px | #F4B400 (40%透明度) |
| 合并树边 | 实线 | 2px | #0F9D58 (40%透明度) |
| 高亮边 | 实线 | 3px | 对应树的主色 (100%不透明) |
| 处理中边 | 实线 | 2px | 对应树的主色 (70%透明度) |
| 创建中边 | 虚线→实线 | 2px | 对应树的主色 (动画从50%到100%不透明) |

#### 4.2.2 边的视觉效果

- **曲线类型**: 贝塞尔曲线，确保边平滑连接
- **端点**: 圆形端点(round cap)，避免尖锐边缘
- **连接点**: 边应精确连接到节点边缘
- **箭头**: 不使用箭头，除非特殊情况需要指示方向

### 4.3 背景与分区

- **主背景**: 纯白色 (#FFFFFF)
- **树区域背景**: 超淡色背景(对应树色彩，透明度<5%)
- **控制面板背景**: 浅灰色 (#F9F9F9)
- **代码区域背景**: 白色底，代码高亮遵循标准语法高亮方案
- **分隔线**: 1px实线，#E0E0E0
- **区域圆角**: 8px

### 4.4 图标系统

使用Material Design图标系统，确保界面一致性:

- **图标尺寸**: 24px × 24px (标准尺寸)
- **图标颜色**: 主要为中性灰色(#757575)
- **图标状态**: 与按钮状态一致(激活、禁用等)
- **交互图标**: 使用填充式图标增强识别度

## 五、状态与反馈视觉设计

### 5.1 组件状态视觉规范

| 组件 | 默认状态 | 悬停状态 | 点击状态 | 禁用状态 |
|-----|---------|---------|---------|---------|
| 按钮 | 背景#4285F4 文字白色 | 背景#1A73E8 轻微阴影 | 背景#0F62FE 下沉效果 | 背景#BDBDBD 文字#EEEEEE |
| 文本链接 | #4285F4 无下划线 | #1A73E8 有下划线 | #0F62FE 有下划线 | #BDBDBD 无下划线 |
| 单选按钮 | 边框圆形 主色填充 | 轻微阴影 | 深色填充 | 灰色边框和填充 |
| 滑块 | 轨道#E0E0E0 滑块主色 | 滑块微放大 | 滑块主色加深 | 轨道和滑块均为灰色 |
| 进度条 | 轨道#E0E0E0 进度主色 | 无变化 | 无变化 | 轨道和进度均为灰色 |

### 5.2 算法步骤状态视觉设计

| 步骤状态 | 节点视觉表现 | 边的视觉表现 | 背景/环境视觉变化 |
|---------|------------|------------|----------------|
| 当前步骤 | 主要节点放大高亮 | 相关边高亮加粗 | 步骤区域轻微高亮 |
| 已完成步骤 | 节点正常大小完全不透明 | 边正常样式完全不透明 | 无特殊处理 |
| 未执行步骤 | 节点半透明 | 边半透明 | 无特殊处理 |
| 步骤过渡中 | 节点/边属性动画过渡 | 流动效果动画 | 平滑的透明度变化 |

### 5.3 操作反馈视觉设计

| 操作类型 | 视觉反馈方式 |
|---------|------------|
| 点击按钮 | 按钮下沉效果+涟漪动画，持续200ms |
| 拖动滑块 | 滑块跟随+轨道填充色变化，实时反馈 |
| 算法切换 | 全局淡出/淡入动画，中间有150ms过渡空白 |
| 步骤跳转 | 从当前步骤到目标步骤的快速过渡动画 |
| 播放/暂停 | 图标平滑切换动画，持续150ms |
| 错误状态 | 组件边缘红色闪烁，文本变为错误色 |

## 六、动效设计语言

### 6.1 动效时间与缓动参数

| 动效类型 | 持续时间 | 缓动函数 | 应用场景 |
|---------|---------|---------|---------|
| 超短动效 | 100-150ms | ease | 开关、图标变换 |
| 短动效 | 200-300ms | ease-out | 节点状态变化、按钮反馈 |
| 中等动效 | 300-500ms | ease-in-out | 元素进入/退出、状态转换 |
| 长动效 | 500-800ms | ease-in-out | 视图切换、算法重置 |

### 6.2 节点位置动效设计

- **移入动效**: 使用轻微放大+淡入组合效果
- **移出动效**: 使用轻微缩小+淡出组合效果
- **位置变化**: 使用平滑贝塞尔曲线路径，避免直线生硬过渡
- **层次变化**: 使用Z轴区分层次，创造空间感

### 6.3 数据流动可视化

- **数据传递**: 使用"流动"效果沿边从源节点到目标节点
- **队列操作**: 元素顺序侧滑进出效果
- **栈操作**: 元素垂直堆叠进出效果
- **合并操作**: 两个节点的值汇聚动画，最终形成新值

### 6.4 重点交互动效

| 交互场景 | 动效描述 | 目的 |
|---------|---------|------|
| 合并节点 | 两个节点光晕聚合，数值融合 | 直观展示合并过程 |
| 节点复制 | 节点轻微抖动后分裂出副本 | 表现节点复制行为 |
| 遍历路径 | 沿路径的脉冲流动效果 | 展示遍历方向和顺序 |
| 回溯操作 | 路径反向流动，节点光晕消退 | 表达回溯过程 |
| 算法切换 | 当前视图淡出，新视图组织后淡入 | 表达算法框架切换 |

## 七、响应式视觉调整

### 7.1 不同设备尺寸的视觉密度

| 设备类型 | 节点大小调整 | 边距与间距调整 | 字体大小调整 |
|---------|------------|--------------|------------|
| 桌面大屏 | 标准尺寸(40px) | 标准间距 | 标准字号 |
| 笔记本 | 90%缩放(36px) | 减少10%的边距 | 保持标准字号 |
| 平板 | 85%缩放(34px) | 减少15%的边距 | 减小1px字号 |
| 手机 | 75%缩放(30px) | 减少25%的边距 | 减小2px字号 |

### 7.2 方向适配视觉处理

- **横屏模式**: 树的完整展示，三区域并列布局
- **竖屏模式**: 树的缩放适配，区域垂直堆叠，可左右滑动查看完整树

### 7.3 密度适配原则

- **触控设备**: 增大交互元素间距，提高可触达性
- **高密度信息设备**: 可适当减小视觉元素间距，增加信息密度
- **保持比例**: 在任何缩放级别保持设计元素的比例关系

## 八、辅助视觉元素

### 8.1 弹出提示设计

- **形状**: 圆角矩形，8px圆角
- **背景**: 深色背景(#424242)，80%不透明度
- **文本**: 白色文本，14px
- **边距**: 内边距8px 12px
- **位置**: 根据触发元素位置智能定位，避免遮挡关键内容
- **动画**: 淡入淡出，200ms，ease-in-out

### 8.2 标注与图例

- **设计风格**: 与主界面一致，扁平化简洁设计
- **颜色**: 使用低饱和度的版本区分不同算法或状态
- **图例位置**: 首选右上角，不干扰主要内容
- **标注形式**: 使用细线连接说明文本与被标注元素
- **标注动效**: 首次出现时轻微的弹跳动画吸引注意

### 8.3 引导元素

- **焦点聚光灯**: 突出关键区域的暗淡背景+高亮焦点
- **指引箭头**: 简洁的单线条箭头，遵循品牌主色
- **步骤指示器**: 小圆点或数字标识当前进度
- **引导线**: 虚线或点线，引导视线流向

## 九、特殊场景设计示例

### 9.1 DFS与BFS对比视图

当需要同时展示两种算法时:

- **分割方式**: 垂直分割或选项卡切换
- **标识方式**: 算法名称作为区域标题，保持明确分区
- **色彩区分**: 可考虑在保持主色调的基础上，DFS区域色相偏蓝，BFS区域色相偏紫
- **共享元素**: 两区域中相同节点保持视觉一致性
- **当前焦点**: 始终只有一个算法区域包含高亮元素

### 9.2 完成状态设计

当算法执行完成时:

- **整体效果**: 所有节点完全不透明，边保持清晰
- **合并结果**: 给予合并结果树轻微的成功状态强调(如微小放大或发光)
- **视觉总结**: 可提供整个过程的小型缩略图总结(可选)
- **明确标识**: "完成"状态的明确视觉标记

### 9.3 错误状态处理

当发生错误或异常时:

- **定位标识**: 在错误位置添加醒目标识(红色感叹号图标)
- **元素状态**: 相关元素添加错误状态样式(红色边框或背景)
- **文本提示**: 在控制面板区域显示明确错误说明
- **恢复建议**: 提供可行的操作建议以恢复

## 十、设计资源与规范

### 10.1 设计系统文件

- **Figma/Sketch组件库**: 包含所有UI元素和树节点设计
- **色彩样式库**: 包含主色、扩展色和功能色
- **排版样式**: 文本样式定义
- **图标资源**: SVG格式的所有界面图标

### 10.2 开发资源

- **色彩变量**: CSS变量或SASS/LESS变量
- **组件规范**: 详细的组件属性和状态定义
- **动效参数**: 标准化的动画参数文件
- **响应式断点**: 明确的断点定义和处理方法

---

本视觉设计指南作为合并二叉树可视化动画项目的视觉规范，应与交互设计规范和算法分镜文档配合使用，共同指导最终实现。遵循本指南可确保产品具有专业、一致和优雅的视觉体验。 